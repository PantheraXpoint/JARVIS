{
  "tasks": [
    {
      "id": "source",
      "model_id": "none",
      "inputs_from_upstreams": [
        "none"
      ],
      "upstreams": [
        "none"
      ],
      "outputs_for_downstreams": [
        "image"
      ],
      "downstreams": [
        "object-detection-general"
      ],
      "model-chosen-reason": "Source task doesn't need a model",
      "sample-reasoning": {
        "object-detection-general": "Detecting humans and objects in the scene to identify the unconscious person and gather context."
      }
    },
    {
      "id": "object-detection-general",
      "model_id": "yolov5m",
      "inputs_from_upstreams": [
        "image"
      ],
      "upstreams": [
        "source"
      ],
      "outputs_for_downstreams": [
        "bounding boxes"
      ],
      "downstreams": [
        "face-detection",
        "cloth-color-classification",
        "human-pose-detection"
      ],
      "model-chosen-reason": "The YOLOv5m model provides a good trade-off between speed and accuracy, making it suitable for detecting and localizing objects in the busy and dynamic environment of a Tokyo Diner in London. It can effectively identify people, which is crucial for recognizing the unconscious person and other patrons in the scene. Given the need to balance performance and resource usage in a real-world setting, YOLOv5m strikes the right balance.",
      "sample-reasoning": {
        "face-detection": "Detecting faces to identify individuals involved in the scene.",
        "cloth-color-classification": "Classifying clothing colors to better recognize and identify individuals.",
        "human-pose-detection": "Analyzing human poses to understand the situation and identify the unconscious person."
      }
    },
    {
      "id": "face-detection",
      "model_id": "retina1face",
      "inputs_from_upstreams": [
        "person bounding boxes"
      ],
      "upstreams": [
        "object-detection-general"
      ],
      "outputs_for_downstreams": [
        "face bounding boxes"
      ],
      "downstreams": [
        "gender-classification",
        "face-recognition"
      ],
      "model-chosen-reason": "The scenario involves detecting faces in a crowded diner setting where people are seated and a staff member is walking by. The RetinaFace model, specifically the optimized RetinaFace on bounding boxes, is well-suited for this task due to its efficiency and accuracy in detecting faces within specified regions. Given the presence of other people and potential occlusions, this model's ability to work within person bounding boxes makes it particularly effective for identifying faces in this dynamic environment.",
      "sample-reasoning": {
        "gender-classification": "Determining gender to understand the demographic of the individuals involved.",
        "face-recognition": "Identifying individuals to provide more context and security."
      }
    },
    {
      "id": "gender-classification",
      "model_id": "gender",
      "inputs_from_upstreams": [
        "face bounding boxes"
      ],
      "upstreams": [
        "face-detection"
      ],
      "outputs_for_downstreams": [
        "gender labels"
      ],
      "downstreams": [
        "pipeline-end"
      ],
      "model-chosen-reason": "The 'Gender Classifier' model is the most suitable choice for this scenario because it is specifically designed to classify and identify gender of faces in images. Given the presence of people in various postures and potentially challenging lighting conditions within the diner, this model's accuracy and robustness to different conditions make it the best fit for the task. Additionally, the scenario does not require any advanced object detection or other complex features, making the 'Gender Classifier' the optimal solution.",
      "sample-reasoning": {
        "pipeline-end": "Finalizing the pipeline after analysis."
      }
    },
    {
      "id": "face-recognition",
      "model_id": "arcface",
      "inputs_from_upstreams": [
        "face bounding boxes"
      ],
      "upstreams": [
        "face-detection"
      ],
      "outputs_for_downstreams": [
        "identity labels"
      ],
      "downstreams": [
        "pipeline-end"
      ],
      "model-chosen-reason": "The ArcFace model is a state-of-the-art face recognition model that is highly accurate and robust, making it suitable for recognizing faces in various conditions such as those present in the scenario, including potential lighting variations and occlusions. Given the task requires face recognition and the scenario involves identifying individuals, ArcFace is the best choice among the available models.",
      "sample-reasoning": {
        "pipeline-end": "Finalizing the pipeline after analysis."
      }
    },
    {
      "id": "cloth-color-classification",
      "model_id": "fashioncolor",
      "inputs_from_upstreams": [
        "person bounding boxes"
      ],
      "upstreams": [
        "object-detection-general"
      ],
      "outputs_for_downstreams": [
        "cloth color labels"
      ],
      "downstreams": [
        "pipeline-end"
      ],
      "model-chosen-reason": "The scenario involves identifying colors in clothing items, which aligns perfectly with the 'Cloth Color Classifier' model's purpose. Although the scenario is set in a diner, the model's specialization in classifying cloth colors makes it the most suitable choice for this task.",
      "sample-reasoning": {
        "pipeline-end": "Finalizing the pipeline after analysis."
      }
    },
    {
      "id": "human-pose-detection",
      "model_id": "movenet",
      "inputs_from_upstreams": [
        "person bounding boxes"
      ],
      "upstreams": [
        "object-detection-general"
      ],
      "outputs_for_downstreams": [
        "pose key points"
      ],
      "downstreams": [
        "pipeline-end"
      ],
      "model-chosen-reason": "The scenario involves detecting a person who appears to be unconscious, and the task requires pose detection. MoveNet is a fast and accurate pose detection model that can identify key points of the human body in images, making it well-suited for real-time analysis in this emergency-like situation within a crowded environment. Its speed and accuracy are crucial for quickly assessing the situation.",
      "sample-reasoning": {
        "pipeline-end": "Finalizing the pipeline after analysis."
      }
    },
    {
      "id": "pipeline-end",
      "model_id": "none",
      "inputs_from_upstreams": [
        "various task outputs"
      ],
      "upstreams": [
        "gender-classification",
        "face-recognition",
        "cloth-color-classification",
        "human-pose-detection"
      ],
      "outputs_for_downstreams": [
        "none"
      ],
      "downstreams": [],
      "model-chosen-reason": "Pipeline End task doesn't need a model",
      "sample-reasoning": {}
    }
  ]
}