{
  "tasks": [
    {
      "id": "source",
      "model_id": "none",
      "inputs_from_upstreams": [
        "none"
      ],
      "upstreams": [
        "none"
      ],
      "outputs_for_downstreams": [
        "image"
      ],
      "downstreams": [
        "object-detection-general"
      ],
      "model-chosen-reason": "Source task doesn't need a model",
      "sample-reasoning": {
        "object-detection-general": "Since there is a fight, detecting objects in the scene is the first step to identify relevant entities such as people and vehicles."
      }
    },
    {
      "id": "object-detection-general",
      "model_id": "yolov5m",
      "inputs_from_upstreams": [
        "image"
      ],
      "upstreams": [
        "source"
      ],
      "outputs_for_downstreams": [
        "bounding boxes"
      ],
      "downstreams": [
        "face-detection",
        "cloth-color-classification"
      ],
      "model-chosen-reason": "The YOLOv5m model provides a good trade-off between speed and accuracy, making it suitable for real-time object detection in a dynamic environment like a busy bar at night. It can effectively detect and localize objects such as people involved in a physical altercation, as well as other potential objects like vehicles or animals that might be present. Its medium size ensures it can handle the complexity of the scene without being too computationally intensive.",
      "sample-reasoning": {
        "face-detection": "Since there is a fight, detecting faces is important for identifying individuals involved in the altercation.",
        "cloth-color-classification": "Since there is an altercation, classifying clothing colors to better recognize and identify individuals."
      }
    },
    {
      "id": "face-detection",
      "model_id": "retina1face",
      "inputs_from_upstreams": [
        "person bounding boxes"
      ],
      "upstreams": [
        "object-detection-general"
      ],
      "outputs_for_downstreams": [
        "face bounding boxes"
      ],
      "downstreams": [
        "gender-classification",
        "emotion-classification",
        "face-recognition"
      ],
      "model-chosen-reason": "The scenario involves a dynamic environment with people engaged in a physical altercation, which may include occlusions and varying lighting conditions. The RetinaFace on bounding boxes model is optimized for efficient face detection within specified bounding boxes, making it well-suited for detecting faces in complex scenes where other parts of the body might obscure faces. This model's accuracy and speed make it ideal for real-time face detection in a crowded and chaotic environment like a bar at night.",
      "sample-reasoning": {
        "gender-classification": "Since there is a fight, determining gender is important for security and safety measures.",
        "emotion-classification": "Since there is a fight, analyzing facial expressions is important for security and safety measures.",
        "face-recognition": "Since there is a fight, identifying individuals is crucial for security and emergency response."
      }
    },
    {
      "id": "gender-classification",
      "model_id": "gender",
      "inputs_from_upstreams": [
        "face bounding boxes"
      ],
      "upstreams": [
        "face-detection"
      ],
      "outputs_for_downstreams": [
        "gender labels"
      ],
      "downstreams": [
        "pipeline-end"
      ],
      "model-chosen-reason": "The scenario involves identifying individuals, and the task requires classifying gender based on face bounding boxes. The 'Gender Classifier' model is specifically designed for this purpose, making it the most suitable choice for accurately identifying the genders of the individuals involved in the altercation.",
      "sample-reasoning": {
        "pipeline-end": "Finalizing the pipeline after analysis."
      }
    },
    {
      "id": "emotion-classification",
      "model_id": "emotion",
      "inputs_from_upstreams": [
        "face bounding boxes"
      ],
      "upstreams": [
        "face-detection"
      ],
      "outputs_for_downstreams": [
        "emotion labels"
      ],
      "downstreams": [
        "pipeline-end"
      ],
      "model-chosen-reason": "The scenario involves individuals in a physical altercation, and the task requires emotion classification of faces. The 'Emotion Classifier' model is specifically trained for this purpose and can accurately identify emotions from faces in images, making it the most suitable choice for this context.",
      "sample-reasoning": {
        "pipeline-end": "Finalizing the pipeline after analysis."
      }
    },
    {
      "id": "face-recognition",
      "model_id": "arcface",
      "inputs_from_upstreams": [
        "face bounding boxes"
      ],
      "upstreams": [
        "face-detection"
      ],
      "outputs_for_downstreams": [
        "identity labels"
      ],
      "downstreams": [
        "pipeline-end"
      ],
      "model-chosen-reason": "The scenario involves recognizing and verifying identities of individuals in a crowded environment with potential occlusions and varying lighting conditions. ArcFace is a state-of-the-art face recognition model that is highly accurate and robust to these conditions, making it the best choice for this task.",
      "sample-reasoning": {
        "pipeline-end": "Finalizing the pipeline after analysis."
      }
    },
    {
      "id": "cloth-color-classification",
      "model_id": "fashioncolor",
      "inputs_from_upstreams": [
        "person bounding boxes"
      ],
      "upstreams": [
        "object-detection-general"
      ],
      "outputs_for_downstreams": [
        "cloth color labels"
      ],
      "downstreams": [
        "pipeline-end"
      ],
      "model-chosen-reason": "The scenario involves people in a physical altercation, but the task requires classifying cloth colors. The fashioncolor model is specifically trained for cloth color classification, making it the most suitable choice despite the dynamic and potentially cluttered environment. Its specialization in identifying colors in clothing items ensures accurate results, even if the individuals are moving or interacting closely.",
      "sample-reasoning": {
        "pipeline-end": "Finalizing the pipeline after analysis."
      }
    },
    {
      "id": "pipeline-end",
      "model_id": "none",
      "inputs_from_upstreams": [
        "various task outputs"
      ],
      "upstreams": [
        "gender-classification",
        "emotion-classification",
        "face-recognition",
        "cloth-color-classification"
      ],
      "outputs_for_downstreams": [
        "none"
      ],
      "downstreams": [],
      "model-chosen-reason": "Pipeline End task doesn't need a model",
      "sample-reasoning": {}
    }
  ]
}