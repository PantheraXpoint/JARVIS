{
  "tasks": [
    {
      "id": "source",
      "model_id": "none",
      "inputs_from_upstreams": [
        "none"
      ],
      "upstreams": [
        "none"
      ],
      "outputs_for_downstreams": [
        "image"
      ],
      "downstreams": [
        "object-detection-general",
        "fire-detection"
      ],
      "model-chosen-reason": "Source task doesn't need a model",
      "sample-reasoning": {
        "object-detection-general": "Detecting objects in the scene to identify people and vehicles.",
        "fire-detection": "Detecting the fire to respond to the emergency situation."
      }
    },
    {
      "id": "object-detection-general",
      "model_id": "yolov5m",
      "inputs_from_upstreams": [
        "image"
      ],
      "upstreams": [
        "source"
      ],
      "outputs_for_downstreams": [
        "bounding boxes"
      ],
      "downstreams": [
        "face-detection",
        "cloth-color-classification"
      ],
      "model-chosen-reason": "The YOLOv5m model provides a good trade-off between speed and accuracy, making it suitable for real-time object detection in a dynamic environment like a shopping mall during a fire. It can effectively detect and localize objects such as people and vehicles, which are relevant in the scenario. The medium-sized architecture ensures robust performance under varying conditions, including potential lighting changes and occlusions caused by smoke and crowds.",
      "sample-reasoning": {
        "face-detection": "Detecting faces to identify individuals in the emergency situation.",
        "cloth-color-classification": "Classifying clothing colors to better recognize and identify individuals."
      }
    },
    {
      "id": "face-detection",
      "model_id": "retina1face",
      "inputs_from_upstreams": [
        "person bounding boxes"
      ],
      "upstreams": [
        "object-detection-general"
      ],
      "outputs_for_downstreams": [
        "face bounding boxes"
      ],
      "downstreams": [
        "gender-classification",
        "emotion-classification",
        "face-recognition"
      ],
      "model-chosen-reason": "The scenario involves a fire in a shopping mall with visible flames and smoke, and shoppers walking and standing nearby. The retina1face model is optimized for efficient face detection within specified bounding boxes, making it suitable for detecting faces in the presence of other objects and under varying conditions such as those present in the emergency situation described. While the task specifically requires face detection, the model's efficiency and robustness in handling complex scenes make it the best choice for this scenario.",
      "sample-reasoning": {
        "gender-classification": "Determining gender to assist in emergency response and safety measures.",
        "emotion-classification": "Analyzing facial expressions to assess the emotional state of individuals.",
        "face-recognition": "Identifying individuals for security and emergency response."
      }
    },
    {
      "id": "gender-classification",
      "model_id": "gender",
      "inputs_from_upstreams": [
        "face bounding boxes"
      ],
      "upstreams": [
        "face-detection"
      ],
      "outputs_for_downstreams": [
        "gender labels"
      ],
      "downstreams": [
        "pipeline-end"
      ],
      "model-chosen-reason": "The scenario involves identifying individuals in a chaotic environment with visible flames and smoke. While the task requires gender classification, the 'gender' model is specifically designed for this purpose and can handle face detection and classification even under challenging conditions such as those present in a fire emergency. Other models might not have been trained for such specific scenarios, making the 'gender' model the most suitable choice.",
      "sample-reasoning": {
        "pipeline-end": "Finalizing the pipeline after analysis."
      }
    },
    {
      "id": "emotion-classification",
      "model_id": "emotion",
      "inputs_from_upstreams": [
        "face bounding boxes"
      ],
      "upstreams": [
        "face-detection"
      ],
      "outputs_for_downstreams": [
        "emotion labels"
      ],
      "downstreams": [
        "pipeline-end"
      ],
      "model-chosen-reason": "The scenario involves a fire emergency in a shopping mall, and the task requires emotion classification of faces. The 'Emotion Classifier' model is specifically designed for classifying and identifying emotions of faces in images, making it the most suitable choice for this task. Although the scenario includes a fire, the model's focus on face emotion recognition aligns well with the task requirements, even in a potentially chaotic environment.",
      "sample-reasoning": {
        "pipeline-end": "Finalizing the pipeline after analysis."
      }
    },
    {
      "id": "face-recognition",
      "model_id": "arcface",
      "inputs_from_upstreams": [
        "face bounding boxes"
      ],
      "upstreams": [
        "face-detection"
      ],
      "outputs_for_downstreams": [
        "identity labels"
      ],
      "downstreams": [
        "pipeline-end"
      ],
      "model-chosen-reason": "The ArcFace model is a state-of-the-art face recognition model that is highly accurate and robust to various conditions. Given the emergency scenario with visible flames and smoke, and the presence of shoppers, the model's ability to handle challenging lighting conditions and potential occlusions makes it the best choice for this task. Additionally, the scenario does not require real-time processing speed, making the higher accuracy of ArcFace more beneficial.",
      "sample-reasoning": {
        "pipeline-end": "Finalizing the pipeline after analysis."
      }
    },
    {
      "id": "cloth-color-classification",
      "model_id": "fashioncolor",
      "inputs_from_upstreams": [
        "person bounding boxes"
      ],
      "upstreams": [
        "object-detection-general"
      ],
      "outputs_for_downstreams": [
        "cloth color labels"
      ],
      "downstreams": [
        "pipeline-end"
      ],
      "model-chosen-reason": "The scenario involves a fire in a shopping mall, but the task requires cloth color classification based on person bounding boxes. The 'fashioncolor' model is specifically trained for cloth color classification and is therefore the most suitable choice for this task. Although the scenario includes emergency conditions, the model's specialization in color classification makes it the best fit among the available options.",
      "sample-reasoning": {
        "pipeline-end": "Finalizing the pipeline after analysis."
      }
    },
    {
      "id": "fire-detection",
      "model_id": "firedetect",
      "inputs_from_upstreams": [
        "image"
      ],
      "upstreams": [
        "source"
      ],
      "outputs_for_downstreams": [
        "fire and smoke bounding boxes"
      ],
      "downstreams": [
        "pipeline-end"
      ],
      "model-chosen-reason": "The scenario involves a fire and smoke situation in a shopping mall, and the firedetect model is specifically trained to identify and localize fire and smoke in various environments. This makes it the most suitable choice for the given task.",
      "sample-reasoning": {
        "pipeline-end": "Finalizing the pipeline after fire detection analysis."
      }
    },
    {
      "id": "pipeline-end",
      "model_id": "none",
      "inputs_from_upstreams": [
        "various task outputs"
      ],
      "upstreams": [
        "gender-classification",
        "emotion-classification",
        "face-recognition",
        "cloth-color-classification",
        "fire-detection"
      ],
      "outputs_for_downstreams": [
        "none"
      ],
      "downstreams": [],
      "model-chosen-reason": "Pipeline End task doesn't need a model",
      "sample-reasoning": {}
    }
  ]
}